<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <title>
      Intro to graphics | Sample | ArcGIS Maps SDK for JavaScript 4.31
    </title>
    <!-- Ref: https://developers.arcgis.com/javascript/latest/sample-code/intro-graphics/ -->
    <link
      rel="stylesheet"
      href="https://js.arcgis.com/4.31/esri/themes/light/main.css"
    />
    <script src="https://js.arcgis.com/4.31/"></script>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>

    <script>
      require([
        "esri/Map",
        "esri/views/MapView",
        "esri/Graphic",
        "esri/layers/GraphicsLayer",
        "esri/geometry/geometryEngine",
      ], (Map, MapView, Graphic, GraphicsLayer,geometryEngine) => {
        const map = new Map({
          basemap: "streets-navigation-vector",
        });

        const view = new MapView({
          center: [100.5018, 13.7563],
          zoom: 13,
          container: "viewDiv",
          map: map,
        });

        // สร้าง GraphicsLayer เพื่อใส่ตำแหน่ง
        const graphicsLayer = new GraphicsLayer();
        map.add(graphicsLayer);

        const pointSymbol = {
          type: "picture-marker", // ใช้รูปภาพ
          url: "https://cdn-icons-png.flaticon.com/512/5231/5231019.png",
          width: "36px",
          height: "36px",
        };

        // Create a graphic and add the geometry and symbol to it
        const pointGraphic = new Graphic({
          geometry: {
            type: "point", // autocasts as new Point()
            longitude: 100.4918,
            latitude: 13.7563,
          },
          symbol: pointSymbol,
        });

        // สร้าง Buffer วงกลม
        const bufferGeometry = geometryEngine.geodesicBuffer(pointGraphic.geometry, 1, "kilometers");
        const bufferSymbol = {
          type: "simple-fill", // autocasts as new SimpleFillSymbol()
          color: [140, 140, 222, 0.5],
          outline: {
            color: [0, 0, 0, 0.5],
            width: 2
          }
        };
        const bufferGraphic = new Graphic({
          geometry: bufferGeometry,
          symbol: bufferSymbol,
        });
        graphicsLayer.add(bufferGraphic);
        
        // Add the graphics to the view's graphics layer
        graphicsLayer.add(pointGraphic);

      });
    </script>
  </head>
  <body>
    <div id="viewDiv"></div>
  </body>
  <!-- Ref -->
  <!-- https://developers.arcgis.com/javascript/latest/sample-code/ge-geodesicbuffer/ -->
  <!-- https://developers.arcgis.com/javascript/latest/api-reference/esri-geometry-geometryEngine.html -->
  <!-- https://developers.arcgis.com/javascript/latest/sample-code/sketch-update-validation/ -->
  <!-- https://developers.arcgis.com/javascript/latest/sample-code/geometry-operator-centroid/ -->
  <!-- https://developers.arcgis.com/javascript/latest/sample-code/layers-dimension/ -->
</html>
